<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Mãos Conectadas</title>
</head>
<body>
  <h1>Mãos Conectadas</h1>

  <!-- Formulário de login -->
  <div id="login-section">
    <h2>Login</h2>
    <input type="email" id="email" placeholder="Digite seu e-mail" />
    <input type="password" id="password" placeholder="Digite sua senha" />
    <button id="login-btn">Entrar</button>
    <button id="logout-btn" style="display:none;">Sair</button>
  </div>

  <!-- Área para exibir dados -->
  <div id="data-section" style="display:none;">
    <h2>Dados do Firebase</h2>
    <pre id="data-output">Carregando...</pre>
  </div>

  <!-- Importando Firebase -->
  <script type="module">
    // Importa SDKs necessários
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
    import { getDatabase, ref, onValue } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-database.js";
    import { getAuth, signInWithEmailAndPassword, signOut, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-auth.js";

    // Configuração do Firebase (seus dados)
    const firebaseConfig = {
      apiKey: "AIzaSyDDKn1fV1nzZwEzN5WJtlRKU_BirE9C_as",
      authDomain: "maos-conectadas.firebaseapp.com",
      databaseURL: "https://maos-conectadas-default-rtdb.firebaseio.com",
      projectId: "maos-conectadas",
      storageBucket: "maos-conectadas.firebasestorage.app",
      messagingSenderId: "392102353018",
      appId: "1:392102353018:web:75b0ab1b22b704dcba83c3",
      measurementId: "G-7TDTH45J64"
    };

    // Inicializa Firebase
    const app = initializeApp(firebaseConfig);
    const db = getDatabase(app);
    const auth = getAuth(app);

    // Elementos da página
    const loginBtn = document.getElementById("login-btn");
    const logoutBtn = document.getElementById("logout-btn");
    const emailInput = document.getElementById("email");
    const passwordInput = document.getElementById("password");
    const dataSection = document.getElementById("data-section");
    const dataOutput = document.getElementById("data-output");

    // Login
    loginBtn.addEventListener("click", async () => {
      try {
        await signInWithEmailAndPassword(auth, emailInput.value, passwordInput.value);
        console.log("Login realizado com sucesso");
      } catch (error) {
        alert("Erro no login: " + error.message);
      }
    });

    // Logout
    logoutBtn.addEventListener("click", async () => {
      await signOut(auth);
    });

    // Estado de autenticação
    onAuthStateChanged(auth, (user) => {
      if (user) {
        console.log("Usuário logado:", user.email);
        loginBtn.style.display = "none";
        logoutBtn.style.display = "inline-block";
        dataSection.style.display = "block";

        // Acessa dados do Firebase (exemplo: nó "usuarios")
        const dataRef = ref(db, "usuarios");
        onValue(dataRef, (snapshot) => {
          const data = snapshot.val();
          dataOutput.textContent = JSON.stringify(data, null, 2);
        });
      } else {
        console.log("Usuário deslogado");
        loginBtn.style.display = "inline-block";
        logoutBtn.style.display = "none";
        dataSection.style.display = "none";
      }
    });
  </script>
</body>
</html>
